<template>
  <div class="loader" v-show="isVisible">
    <div v-if="loadingError" class="loading-error">
      <div>{{ loadingError.message }} :(</div>
      <div class="link" @click="onRetryClick">Retry?</div>
    </div>
    <div v-else-if="value" class="loading-spinner">
      <div>YAMR DeLorean</div><br>
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        width="200px" height="200px"
        x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"
      >
        <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>
        <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M1749.9,4998.3c-788.2-64.8-1477.1-699.7-1624-1492.2c-34.6-190-34.6-6621.1,0-6811.1c66.9-358.5,228.9-665.1,496.7-941.5c233.2-241.9,531.2-421.1,844.4-505.3c131.7-36.7,349.8-38.9,3541.6-38.9c3191.8,0,3409.9,2.1,3541.6,38.9c313.1,84.2,611.1,263.5,844.4,505.3c168.5,174.9,254.8,295.8,354.2,509.6c162,343.4,151.2,41,151.2,3837.4c0,3191.7-2.1,3409.9-38.9,3541.6c-138.2,503.2-498.9,943.7-976.1,1183.4c-162,79.9-373.6,146.9-537.7,166.3C8185.2,5013.4,1989.6,5017.7,1749.9,4998.3z M8366.6,4365.6c442.7-112.3,794.7-464.3,907-907c28.1-112.3,32.4-537.7,32.4-3358c0-3554.5,8.6-3334.3-133.9-3628c-92.9-190-345.5-442.7-535.6-535.6c-293.7-142.5-73.4-133.9-3628-133.9c-3554.5,0-3334.3-8.6-3628,133.9c-190,92.9-442.7,345.5-535.6,535.6c-142.5,293.7-133.9,73.4-133.9,3628c0,2820.3,4.3,3245.7,32.4,3358c112.3,436.2,462.1,790.4,896.2,904.8C1823.3,4413.1,8178.7,4413.1,8366.6,4365.6z"/><path d="M2514.3,3769.6c-317.5-47.5-544.2-164.1-777.4-397.3c-241.9-241.9-352-462.1-399.5-807.7c-75.6-539.9,224.6-1114.3,717-1373.4c470.8-248.3,1034.4-207.3,1462,105.8l99.3,73.4l377.9-345.5c207.3-190,434.1-399.5,505.3-464.3c97.2-90.7,131.7-138.2,146.8-207.3c23.7-103.7,105.8-222.4,168.4-241.9c41-13,43.2-32.4,43.2-494.5v-481.6l-133.9-28.1c-181.4-34.5-453.5-164.1-604.7-289.4c-380.1-311-563.6-846.5-460-1341.1c129.6-619.8,710.5-1090.6,1349.7-1090.6c509.7,0,1006.3,304.5,1228.8,755.8c149,304.5,185.7,580.9,118.8,900.5c-110.1,533.4-503.2,932.9-1040.9,1058.2l-155.5,36.7v466.4V70.3l64.8,47.5c84.2,62.6,131.7,138.2,159.8,250.5c21.6,79.9,79.9,142.5,518.3,546.4l494.5,455.6l101.5-73.4c248.3-179.2,516.1-267.8,812-267.8c762.3,0,1373.5,606.8,1375.6,1371.3c0,377.9-129.6,693.2-395.2,963.1c-177.1,179.2-298,259.1-514,336.9c-650,235.4-1388.6-58.3-1690.9-673.8c-123.1-252.7-155.5-408.1-144.7-680.2c12.9-254.8,62.6-431.9,179.2-630.6l71.3-120.9l-466.4-429.7l-468.6-431.9l-86.4,38.9c-112.3,51.8-220.3,51.8-321.8-2.2l-82.1-41L4293.8,1163l-472.9,434.1l45.4,66.9c254.8,384.4,282.9,937.2,66.9,1367C3671.8,3545,3078,3855.9,2514.3,3769.6z M3084.4,3406.8c598.2-226.7,863.8-920,574.4-1494.4l-56.1-108l-123.1,105.8c-231.1,203-226.7,192.2-185.7,349.8c28.1,112.3,30.2,159.8,10.8,254.8c-62.6,313.1-341.2,522.6-652.2,494.5c-215.9-19.4-390.9-136.1-488.1-326.1c-190-373.6,34.6-812,451.3-881.1c136-23.7,192.2-10.8,406,75.6c21.6,8.6,90.7-41,203-142.5l170.6-157.7l-110.1-71.3c-159.8-101.5-317.5-155.5-494.5-168.4C2158,1288.3,1637.6,1772,1637.6,2404.7c0,213.8,25.9,317.4,125.2,507.5c151.2,291.5,485.9,522.6,799,552.8C2745.4,3484.5,2937.6,3462.9,3084.4,3406.8z M7520.1,3458.6c56.2-8.6,177.1-51.8,269.9-97.2c220.3-110.1,386.6-282.9,496.7-511.8c71.3-153.3,79.9-187.9,86.4-388.7c8.6-179.2,0-248.3-36.7-369.3c-136-447-552.8-758-1017.1-760.2c-224.6,0-485.9,84.2-643.5,211.6l-49.7,38.9l172.8,155.5l172.8,157.7l92.9-47.5c133.9-69.1,356.3-69.1,501,2.2c233.2,112.3,371.4,347.7,352,593.9c-23.8,308.8-248.3,539.9-552.8,565.8c-313.1,28.1-587.4-177.1-652.2-485.9c-21.6-103.7-19.4-144.7,10.8-261.3c41-159.8,49.7-140.4-162-328.2l-146.9-129.6l-51.8,103.7c-123.1,241.9-155.5,520.4-90.7,773.1c110.1,418.9,475.1,734.2,917.8,788.2c64.8,8.6,142.5,10.8,172.8,8.6C7392.7,3473.7,7461.8,3465.1,7520.1,3458.6z M4857.4-1408.9v-233.2l-95-36.7c-360.6-138.2-477.3-654.3-216-958.8c233.2-274.3,699.7-272.1,926.4,4.3c149,181.4,185.7,444.8,88.5,650c-58.3,127.4-211.6,276.4-321.7,311l-79.9,28.1v237.5v237.5l71.3-15.1c522.6-114.4,891.9-602.5,848.7-1127.3c-51.8-650-658.6-1107.8-1291.4-976.1c-267.8,56.2-535.6,239.7-680.2,468.6c-377.9,589.6-108,1371.3,550.7,1595.9c79.9,25.9,157.7,49.7,172.8,49.7C4850.9-1173.6,4857.4-1234,4857.4-1408.9z"/></g></g>
      </svg>
    </div>
  </div>
</template>

<script>
export default {
  props: {
    value: {
      type: Boolean,
      default: false
    },
    loadingError: Object
  },
  computed: {
    isVisible(){
      return this.value || this.loadingError
    }
  },
  methods: {
    onRetryClick(){
      this.$emit("retry", this.loadingError.retryArgs)
    }
  }
}
</script>

<style scoped>
.loader {
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  background-color: rgba(0,0,0,0.8);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
}

.loading-spinner {
  text-align: center;
  animation-duration: 0.7s;
  animation-name: loader;
  animation-iteration-count: infinite;
  animation-timing-function: ease-in-out;
}
.loading-spinner path {
  fill: var(--action);
}

@keyframes loader {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(0.75);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.loading-error {
  text-align: center;
}

.link {
  color: var(--action);
  text-decoration: underline;
  cursor: pointer;
}

</style>
